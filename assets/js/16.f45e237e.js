(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{392:function(t,e,a){"use strict";a.r(e);var s=a(11),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"开始"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开始"}},[t._v("#")]),t._v(" 开始")]),t._v(" "),a("h2",{attrs:{id:"总览"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总览"}},[t._v("#")]),t._v(" 总览")]),t._v(" "),a("p",[t._v('Vite (法语意为 "快速的"，发音 '),a("code",[t._v("/vit/")]),t._v(") 是一种新型前端构建工具，能够显著提升前端开发体验。它主要由两部分组成：")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("一个开发服务器，它基于 "),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules",target:"_blank",rel:"noopener noreferrer"}},[t._v("原生 ES 模块"),a("OutboundLink")],1),t._v(" 提供了 "),a("a",{attrs:{href:"./features"}},[t._v("丰富的内建功能")]),t._v("，如速度快到惊人的 "),a("a",{attrs:{href:"./features#hot-module-replacement"}},[t._v("模块热更新（HMR）")]),t._v("。")])]),t._v(" "),a("li",[a("p",[t._v("一套构建指令，它使用 "),a("a",{attrs:{href:"https://rollupjs.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("Rollup"),a("OutboundLink")],1),t._v(" 打包你的代码，并且它是预配置的，可以输出用于生产环境的优化过的静态资源。")])])]),t._v(" "),a("p",[t._v("Vite 意在提供开箱即用的配置，同时它的 "),a("a",{attrs:{href:"./api-plugin"}},[t._v("插件 API")]),t._v(" 和 "),a("a",{attrs:{href:"./api-javascript"}},[t._v("JavaScript API")]),t._v(" 带来了高度的可扩展性，并有完整的类型支持。")]),t._v(" "),a("p",[t._v("你可以在 "),a("a",{attrs:{href:"./why"}},[t._v("为什么选 Vite")]),t._v(" 中了解更多关于项目的设计初衷。")]),t._v(" "),a("h2",{attrs:{id:"浏览器支持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#浏览器支持"}},[t._v("#")]),t._v(" 浏览器支持")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("开发环境中：Vite 需要在支持 "),a("a",{attrs:{href:"https://caniuse.com/es6-module-dynamic-import",target:"_blank",rel:"noopener noreferrer"}},[t._v("原生 ES 模块动态导入"),a("OutboundLink")],1),t._v(" 的浏览器中使用。")])]),t._v(" "),a("li",[a("p",[t._v("生产环境中：默认支持的浏览器需要支持 "),a("a",{attrs:{href:"https://caniuse.com/es6-module",target:"_blank",rel:"noopener noreferrer"}},[t._v("通过脚本标签来引入原生 ES 模块"),a("OutboundLink")],1),t._v(" 。可以通过官方插件 "),a("a",{attrs:{href:"https://github.com/vitejs/vite/tree/main/packages/plugin-legacy",target:"_blank",rel:"noopener noreferrer"}},[t._v("@vitejs/plugin-legacy"),a("OutboundLink")],1),t._v(" 支持旧浏览器。有关更多细节详见 "),a("a",{attrs:{href:"./build"}},[t._v("构建生产版本")]),t._v("。")])])]),t._v(" "),a("h2",{attrs:{id:"搭建第一个-vite-项目-scaffolding-your-first-vite-project"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#搭建第一个-vite-项目-scaffolding-your-first-vite-project"}},[t._v("#")]),t._v(" 搭建第一个 Vite 项目 {#scaffolding-your-first-vite-project}")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("兼容性注意")]),t._v(" "),a("p",[t._v("Vite 需要 "),a("a",{attrs:{href:"https://nodejs.org/en/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Node.js"),a("OutboundLink")],1),t._v(" 版本 >= 12.0.0。")])]),t._v(" "),a("p",[t._v("使用 NPM:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init @vitejs/app\n")])])]),a("p",[t._v("使用 Yarn:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" create @vitejs/app\n")])])]),a("p",[t._v("然后按照提示操作即可！")]),t._v(" "),a("p",[t._v("你还可以通过附加的命令行选项直接指定项目名称和你想要使用的模板。例如，要构建一个 Vite + Vue 项目，运行:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# npm 6.x")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init @vitejs/app my-vue-app --template vue\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# npm 7+, 需要额外的双横线：")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" init @vitejs/app my-vue-app -- --template vue\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# yarn")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" create @vitejs/app my-vue-app --template vue\n")])])]),a("p",[t._v("支持的模板预设包括：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("vanilla")])]),t._v(" "),a("li",[a("code",[t._v("vue")])]),t._v(" "),a("li",[a("code",[t._v("vue-ts")])]),t._v(" "),a("li",[a("code",[t._v("react")])]),t._v(" "),a("li",[a("code",[t._v("react-ts")])]),t._v(" "),a("li",[a("code",[t._v("preact")])]),t._v(" "),a("li",[a("code",[t._v("preact-ts")])]),t._v(" "),a("li",[a("code",[t._v("lit-element")])]),t._v(" "),a("li",[a("code",[t._v("lit-element-ts")])]),t._v(" "),a("li",[a("code",[t._v("svelte")])]),t._v(" "),a("li",[a("code",[t._v("svelte-ts")])])]),t._v(" "),a("p",[t._v("查看 "),a("a",{attrs:{href:"https://github.com/vitejs/vite/tree/main/packages/create-app",target:"_blank",rel:"noopener noreferrer"}},[t._v("@vitejs/create-app"),a("OutboundLink")],1),t._v(" 获取每个模板的更多细节。")]),t._v(" "),a("h2",{attrs:{id:"社区模板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#社区模板"}},[t._v("#")]),t._v(" 社区模板")]),t._v(" "),a("p",[t._v("@vitejs/create-app 是一个快速生成主流框架基础模板的工具。查看 Awesome Vite 仓库的 "),a("a",{attrs:{href:"https://github.com/vitejs/awesome-vite#templates",target:"_blank",rel:"noopener noreferrer"}},[t._v("社区维护模板"),a("OutboundLink")],1),t._v("，里面包含不同框架的模板。你可以用如 "),a("a",{attrs:{href:"https://github.com/Rich-Harris/degit",target:"_blank",rel:"noopener noreferrer"}},[t._v("degit"),a("OutboundLink")],1),t._v(" 之类的工具，使用社区模版来搭建项目。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("npx degit user/project my-project\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" my-project\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run dev\n")])])]),a("p",[t._v("如果该项目使用 "),a("code",[t._v("main")]),t._v(" 作为默认分支, 需要在项目名后添加 "),a("code",[t._v("#main")]),t._v("。")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("npx degit user/project"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#main my-project")]),t._v("\n")])])]),a("h2",{attrs:{id:"index-html-与项目根目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#index-html-与项目根目录"}},[t._v("#")]),t._v(" "),a("code",[t._v("index.html")]),t._v(" 与项目根目录")]),t._v(" "),a("p",[t._v("你可能已经注意到，在一个 Vite 项目中，"),a("code",[t._v("index.html")]),t._v(" 在项目最外层而不是在 "),a("code",[t._v("public")]),t._v(" 文件夹内。这是有意而为之的：在开发期间 Vite 是一个服务器，而 "),a("code",[t._v("index.html")]),t._v(" 是该 Vite 项目的入口文件。")]),t._v(" "),a("p",[t._v("Vite 将 "),a("code",[t._v("index.html")]),t._v(" 视为源码和模块图的一部分。Vite 解析 "),a("code",[t._v('<script type="module" src="...">')]),t._v(" ，这个标签指向你的 JavaScript 源码。甚至内联引入 JavaScript 的 "),a("code",[t._v('<script type="module" src="...">')]),t._v(" 和引用 CSS 的 "),a("code",[t._v("<link href>")]),t._v(" 也能利用 Vite 特有的功能被解析。另外，"),a("code",[t._v("index.html")]),t._v(" 中的 URL 将被自动转换，因此不再需要 "),a("code",[t._v("%PUBLIC_URL%")]),t._v(" 占位符了。")]),t._v(" "),a("p",[t._v("与静态 HTTP 服务器类似，Vite 也有 “根目录” 的概念，即文件被提供的位置。你会看到它在整个文档中用 "),a("code",[t._v("<root>")]),t._v(" 表示。源码中的绝对 URL 路径将以项目的 “根” 作为基础来解析，因此你可以像在普通的静态文件服务器上一样编写代码（并且功能更强大！）。Vite 还能够处理依赖关系，解析处于根目录外的文件位置，这使得它即使在基于 monorepo 的方案中也十分有用。")]),t._v(" "),a("p",[t._v("Vite 也支持多个 "),a("code",[t._v(".html")]),t._v(" 作入口点的 "),a("a",{attrs:{href:"./build#multi-page-app"}},[t._v("多页面应用模式")]),t._v("。")]),t._v(" "),a("h4",{attrs:{id:"指定替代根目录-specifying-alternative-root"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#指定替代根目录-specifying-alternative-root"}},[t._v("#")]),t._v(" 指定替代根目录 {#specifying-alternative-root}")]),t._v(" "),a("p",[a("code",[t._v("vite")]),t._v(" 以当前工作目录作为根目录启动开发服务器。你也可以通过 "),a("code",[t._v("vite serve some/sub/dir")]),t._v(" 来指定一个替代的根目录。")]),t._v(" "),a("h2",{attrs:{id:"命令行界面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令行界面"}},[t._v("#")]),t._v(" 命令行界面")]),t._v(" "),a("p",[t._v("在安装了 Vite 的项目中，可以在 npm scripts 中使用 "),a("code",[t._v("vite")]),t._v(" 可执行文件，或者直接使用 "),a("code",[t._v("npx vite")]),t._v(" 运行它。下面是通过脚手架创建的 Vite 项目中默认的 npm scripts：")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dev"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vite"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动开发服务器")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"build"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vite build"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 为生产环境构建产物")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"serve"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vite preview"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 本地预览生产构建产物")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("可以指定额外的命令行选项，如 "),a("code",[t._v("--port")]),t._v(" 或 "),a("code",[t._v("--https")]),t._v("。运行 "),a("code",[t._v("npx vite --help")]),t._v(" 获得完整的命令行选项列表。")]),t._v(" "),a("h2",{attrs:{id:"使用未发布的功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用未发布的功能"}},[t._v("#")]),t._v(" 使用未发布的功能")]),t._v(" "),a("p",[t._v("如果你迫不及待想要体验最新的功能，可以自行克隆 "),a("a",{attrs:{href:"https://github.com/vitejs/vite",target:"_blank",rel:"noopener noreferrer"}},[t._v("vite 仓库"),a("OutboundLink")],1),t._v(" 到本地机器上然后自行将其链接（将需要 "),a("a",{attrs:{href:"https://classic.yarnpkg.com/lang/en/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Yarn 1.x"),a("OutboundLink")],1),t._v("）：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/vitejs/vite.git\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" vite\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" packages/vite\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" build\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("link")]),t._v("\n")])])]),a("p",[t._v("然后，回到你的 vite 项目并运行 "),a("code",[t._v("yarn link vite")]),t._v("。重新启动开发服务器（"),a("code",[t._v("yarn dev")]),t._v("）来体验新功能吧！")])])}),[],!1,null,null,null);e.default=r.exports}}]);